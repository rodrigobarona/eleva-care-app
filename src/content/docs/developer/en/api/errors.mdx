---
title: Error Handling
description: Understanding error responses and handling errors gracefully in your Eleva Care API integration.
---

# Error Handling

Learn how to handle API errors gracefully in your integration. All errors follow a consistent format and include helpful information for debugging.

## Error Response Format

All error responses follow this structure:

```json
{
  "success": false,
  "error": "Human-readable error message",
  "code": "ERROR_CODE",
  "details": {
    // Additional context (optional)
  },
  "requestId": "req_abc123"
}
```

## HTTP Status Codes

| Status | Description |
|--------|-------------|
| `200` | Success |
| `201` | Created |
| `400` | Bad Request - Invalid input |
| `401` | Unauthorized - Invalid or missing authentication |
| `403` | Forbidden - Insufficient permissions |
| `404` | Not Found - Resource doesn't exist |
| `409` | Conflict - Resource conflict (e.g., double booking) |
| `422` | Unprocessable Entity - Validation failed |
| `429` | Too Many Requests - Rate limit exceeded |
| `500` | Internal Server Error |
| `503` | Service Unavailable - Temporary outage |

## Common Error Codes

### Authentication Errors

| Code | Description | Solution |
|------|-------------|----------|
| `AUTH_REQUIRED` | No authentication provided | Include Authorization header |
| `AUTH_INVALID` | Invalid API key or token | Check your credentials |
| `AUTH_EXPIRED` | Token has expired | Refresh your access token |
| `AUTH_INSUFFICIENT_SCOPE` | Missing required scope | Request additional permissions |

**Example:**

```json
{
  "success": false,
  "error": "Invalid API key",
  "code": "AUTH_INVALID",
  "requestId": "req_abc123"
}
```

### Validation Errors

| Code | Description | Solution |
|------|-------------|----------|
| `VALIDATION_ERROR` | Input validation failed | Check the details object |
| `MISSING_FIELD` | Required field missing | Include all required fields |
| `INVALID_FORMAT` | Field format is wrong | Check field format requirements |

**Example:**

```json
{
  "success": false,
  "error": "Validation failed",
  "code": "VALIDATION_ERROR",
  "details": {
    "fields": {
      "email": ["Invalid email format"],
      "startTime": ["Must be in the future"]
    }
  },
  "requestId": "req_abc123"
}
```

### Resource Errors

| Code | Description | Solution |
|------|-------------|----------|
| `NOT_FOUND` | Resource not found | Verify the resource ID |
| `ALREADY_EXISTS` | Resource already exists | Use update instead |
| `DELETED` | Resource was deleted | Resource no longer available |

### Booking Errors

| Code | Description | Solution |
|------|-------------|----------|
| `SLOT_UNAVAILABLE` | Time slot not available | Choose different time |
| `BOOKING_CONFLICT` | Conflicting booking exists | Check expert availability |
| `EXPERT_UNAVAILABLE` | Expert not accepting bookings | Try another expert |
| `SERVICE_UNAVAILABLE` | Service not available | Choose different service |
| `PAST_TIME` | Cannot book in the past | Select future time |
| `INSUFFICIENT_NOTICE` | Too close to appointment time | Book further in advance |

**Example:**

```json
{
  "success": false,
  "error": "Time slot is no longer available",
  "code": "SLOT_UNAVAILABLE",
  "details": {
    "requestedTime": "2024-01-15T10:00:00Z",
    "nextAvailable": "2024-01-15T11:00:00Z"
  },
  "requestId": "req_abc123"
}
```

### Payment Errors

| Code | Description | Solution |
|------|-------------|----------|
| `PAYMENT_FAILED` | Payment processing failed | Try different payment method |
| `CARD_DECLINED` | Card was declined | Use different card |
| `INSUFFICIENT_FUNDS` | Insufficient funds | Use different payment method |
| `PAYMENT_EXPIRED` | Payment intent expired | Create new booking |

### Rate Limit Errors

| Code | Description | Solution |
|------|-------------|----------|
| `RATE_LIMITED` | Too many requests | Wait and retry |

**Example:**

```json
{
  "success": false,
  "error": "Rate limit exceeded",
  "code": "RATE_LIMITED",
  "details": {
    "limit": 100,
    "remaining": 0,
    "resetAt": "2024-01-15T10:05:00Z"
  },
  "requestId": "req_abc123"
}
```

## Error Handling Best Practices

### TypeScript Example

```typescript
interface ElevaError {
  success: false;
  error: string;
  code: string;
  details?: Record<string, unknown>;
  requestId: string;
}

async function createBooking(data: BookingRequest): Promise<Booking> {
  const response = await fetch('https://api.eleva.care/v1/bookings', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${API_KEY}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(data),
  });

  const result = await response.json();

  if (!response.ok) {
    const error = result as ElevaError;
    
    switch (error.code) {
      case 'SLOT_UNAVAILABLE':
        throw new SlotUnavailableError(error.details?.nextAvailable);
        
      case 'VALIDATION_ERROR':
        throw new ValidationError(error.details?.fields);
        
      case 'RATE_LIMITED':
        await delay(error.details?.resetAt);
        return createBooking(data); // Retry
        
      default:
        throw new ApiError(error.message, error.code, error.requestId);
    }
  }

  return result.data as Booking;
}
```

### Python Example

```python
import requests
from time import sleep

class ElevaApiError(Exception):
    def __init__(self, message, code, request_id):
        self.message = message
        self.code = code
        self.request_id = request_id

def create_booking(data):
    response = requests.post(
        'https://api.eleva.care/v1/bookings',
        headers={'Authorization': f'Bearer {API_KEY}'},
        json=data
    )
    
    result = response.json()
    
    if not response.ok:
        error = result
        
        if error['code'] == 'RATE_LIMITED':
            sleep(60)  # Wait and retry
            return create_booking(data)
        
        raise ElevaApiError(
            error['error'],
            error['code'],
            error['requestId']
        )
    
    return result['data']
```

### Retry Strategy

For transient errors, implement exponential backoff:

```typescript
async function withRetry<T>(
  fn: () => Promise<T>,
  maxRetries: number = 3
): Promise<T> {
  let lastError: Error;
  
  for (let attempt = 0; attempt < maxRetries; attempt++) {
    try {
      return await fn();
    } catch (error) {
      lastError = error;
      
      // Only retry on transient errors
      if (!isRetryable(error)) {
        throw error;
      }
      
      // Exponential backoff
      const delay = Math.pow(2, attempt) * 1000;
      await sleep(delay);
    }
  }
  
  throw lastError;
}

function isRetryable(error: unknown): boolean {
  if (error instanceof ApiError) {
    return ['RATE_LIMITED', 'SERVICE_UNAVAILABLE'].includes(error.code);
  }
  return false;
}
```

## Debugging

### Request ID

Every request includes a unique `requestId`. Include this when contacting support:

```
Request ID: req_abc123xyz
```

### Verbose Mode

Enable verbose logging in development:

```typescript
const client = new ElevaCare({
  apiKey: process.env.ELEVA_API_KEY,
  debug: true, // Logs all requests and responses
});
```

### Webhook Debugging

For webhook errors, check the webhook logs:

**Partner Dashboard** → **Settings** → **Webhooks** → **Logs**

## Next Steps

<Cards>
  <Card title="API Endpoints" href="/docs/developer/api/endpoints">
    Explore available endpoints
  </Card>
  <Card title="Webhooks" href="/docs/developer/webhooks/overview">
    Set up webhook notifications
  </Card>
</Cards>

